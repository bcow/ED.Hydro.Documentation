<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>18 Taxonomic Name Resolution when Importing Data in to BETY | Calculating ED Hydro Parameter Priors</title>
  <meta name="description" content="Boooooook">
  <meta name="generator" content="bookdown  and GitBook 2.6.7">

  <meta property="og:title" content="18 Taxonomic Name Resolution when Importing Data in to BETY | Calculating ED Hydro Parameter Priors" />
  <meta property="og:type" content="book" />
  <meta property="og:url" content="https://bcow.github.io/ED.Hydro.Documentation/" />
  
  <meta property="og:description" content="Boooooook" />
  <meta name="github-repo" content="bcow/ED.Hydro.Documentation" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="18 Taxonomic Name Resolution when Importing Data in to BETY | Calculating ED Hydro Parameter Priors" />
  
  <meta name="twitter:description" content="Boooooook" />
  

<meta name="author" content="Betsy Cowdery">


<meta name="date" content="2019-04-10">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="comparing-data-to-priors.html">
<link rel="next" href="head.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />







<script src="libs/kePrint-0.0.1/kePrint.js"></script>


<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Documentation</a></li>
<li class="chapter" data-level="1" data-path="setup.html"><a href="setup.html"><i class="fa fa-check"></i><b>1</b> Setup</a></li>
<li class="part"><span><b>I Starting Parameters</b></span></li>
<li><a href="wdns-liquid-water-density.html#wdns-liquid-water-density"><code>[wdns]:</code> Liquid water density</a></li>
<li><a href="grav-gravity.html#grav-gravity"><code>[grav]:</code> Gravity</a></li>
<li><a href="mpa2m-conversion-from-mpa-to-m.html#mpa2m-conversion-from-mpa-to-m"><code>[MPa2m]:</code> Conversion from MPa to m</a></li>
<li><a href="wood-density-wood-density.html#wood_density-wood-density"><code>[wood_density]:</code> Wood density</a></li>
<li><a href="sla-specific-leaf-area-sla.html#sla-specific-leaf-area-sla"><code>[SLA]:</code> Specific Leaf Area (SLA)</a></li>
<li class="part"><span><b>II Key Leaf Traits</b></span></li>
<li class="chapter" data-level="2" data-path="leaf-psi-osmotic-leaf-osmotic-water-potential-at-saturation.html"><a href="leaf-psi-osmotic-leaf-osmotic-water-potential-at-saturation.html"><i class="fa fa-check"></i><b>2</b> <code>[leaf_psi_osmotic]:</code> Leaf osmotic water potential at saturation</a><ul>
<li class="chapter" data-level="2.1" data-path="leaf-psi-osmotic-leaf-osmotic-water-potential-at-saturation.html"><a href="leaf-psi-osmotic-leaf-osmotic-water-potential-at-saturation.html#ed"><i class="fa fa-check"></i><b>2.1</b> ED</a></li>
<li class="chapter" data-level="2.2" data-path="leaf-psi-osmotic-leaf-osmotic-water-potential-at-saturation.html"><a href="leaf-psi-osmotic-leaf-osmotic-water-potential-at-saturation.html#bety"><i class="fa fa-check"></i><b>2.2</b> BETY</a></li>
<li class="chapter" data-level="2.3" data-path="leaf-psi-osmotic-leaf-osmotic-water-potential-at-saturation.html"><a href="leaf-psi-osmotic-leaf-osmotic-water-potential-at-saturation.html#calculation"><i class="fa fa-check"></i><b>2.3</b> Calculation</a><ul>
<li class="chapter" data-level="2.3.1" data-path="leaf-psi-osmotic-leaf-osmotic-water-potential-at-saturation.html"><a href="leaf-psi-osmotic-leaf-osmotic-water-potential-at-saturation.html#expert-elicitation"><i class="fa fa-check"></i><b>2.3.1</b> Expert elicitation</a></li>
<li class="chapter" data-level="2.3.2" data-path="leaf-psi-osmotic-leaf-osmotic-water-potential-at-saturation.html"><a href="leaf-psi-osmotic-leaf-osmotic-water-potential-at-saturation.html#conversion"><i class="fa fa-check"></i><b>2.3.2</b> Conversion</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="leaf-psi-osmotic-leaf-osmotic-water-potential-at-saturation.html"><a href="leaf-psi-osmotic-leaf-osmotic-water-potential-at-saturation.html#code"><i class="fa fa-check"></i><b>2.4</b> Code</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="leaf-elastic-mod-leaf-bulk-elastic-modulus.html"><a href="leaf-elastic-mod-leaf-bulk-elastic-modulus.html"><i class="fa fa-check"></i><b>3</b> <code>[leaf_elastic_mod]</code>: Leaf bulk elastic modulus</a><ul>
<li class="chapter" data-level="3.1" data-path="leaf-elastic-mod-leaf-bulk-elastic-modulus.html"><a href="leaf-elastic-mod-leaf-bulk-elastic-modulus.html#ed-1"><i class="fa fa-check"></i><b>3.1</b> ED</a></li>
<li class="chapter" data-level="3.2" data-path="leaf-elastic-mod-leaf-bulk-elastic-modulus.html"><a href="leaf-elastic-mod-leaf-bulk-elastic-modulus.html#bety-1"><i class="fa fa-check"></i><b>3.2</b> BETY</a></li>
<li class="chapter" data-level="3.3" data-path="leaf-elastic-mod-leaf-bulk-elastic-modulus.html"><a href="leaf-elastic-mod-leaf-bulk-elastic-modulus.html#calculation-1"><i class="fa fa-check"></i><b>3.3</b> Calculation</a><ul>
<li class="chapter" data-level="3.3.1" data-path="leaf-elastic-mod-leaf-bulk-elastic-modulus.html"><a href="leaf-elastic-mod-leaf-bulk-elastic-modulus.html#expert-elicitation-1"><i class="fa fa-check"></i><b>3.3.1</b> Expert elicitation</a></li>
<li class="chapter" data-level="3.3.2" data-path="leaf-elastic-mod-leaf-bulk-elastic-modulus.html"><a href="leaf-elastic-mod-leaf-bulk-elastic-modulus.html#conversion-1"><i class="fa fa-check"></i><b>3.3.2</b> Conversion</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="leaf-elastic-mod-leaf-bulk-elastic-modulus.html"><a href="leaf-elastic-mod-leaf-bulk-elastic-modulus.html#code-1"><i class="fa fa-check"></i><b>3.4</b> Code</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="leaf-density-density-of-leaf-tissue.html"><a href="leaf-density-density-of-leaf-tissue.html"><i class="fa fa-check"></i><b>4</b> <code>[leaf_density]:</code> Density of leaf tissue</a><ul>
<li class="chapter" data-level="4.1" data-path="leaf-density-density-of-leaf-tissue.html"><a href="leaf-density-density-of-leaf-tissue.html#ed-2"><i class="fa fa-check"></i><b>4.1</b> ED</a></li>
<li class="chapter" data-level="4.2" data-path="leaf-density-density-of-leaf-tissue.html"><a href="leaf-density-density-of-leaf-tissue.html#bety-2"><i class="fa fa-check"></i><b>4.2</b> BETY</a></li>
<li class="chapter" data-level="4.3" data-path="leaf-density-density-of-leaf-tissue.html"><a href="leaf-density-density-of-leaf-tissue.html#calculation-2"><i class="fa fa-check"></i><b>4.3</b> Calculation</a><ul>
<li class="chapter" data-level="4.3.1" data-path="leaf-density-density-of-leaf-tissue.html"><a href="leaf-density-density-of-leaf-tissue.html#expert-elicitation-2"><i class="fa fa-check"></i><b>4.3.1</b> Expert elicitation</a></li>
<li class="chapter" data-level="4.3.2" data-path="leaf-density-density-of-leaf-tissue.html"><a href="leaf-density-density-of-leaf-tissue.html#conversion-2"><i class="fa fa-check"></i><b>4.3.2</b> Conversion</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="leaf-density-density-of-leaf-tissue.html"><a href="leaf-density-density-of-leaf-tissue.html#code-2"><i class="fa fa-check"></i><b>4.4</b> Code</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="leaf-water-sat-leaf-water-content-at-saturation.html"><a href="leaf-water-sat-leaf-water-content-at-saturation.html"><i class="fa fa-check"></i><b>5</b> <code>[leaf_water_sat]:</code> Leaf water content at saturation</a><ul>
<li class="chapter" data-level="5.1" data-path="leaf-water-sat-leaf-water-content-at-saturation.html"><a href="leaf-water-sat-leaf-water-content-at-saturation.html#ed-3"><i class="fa fa-check"></i><b>5.1</b> ED</a></li>
<li class="chapter" data-level="5.2" data-path="leaf-water-sat-leaf-water-content-at-saturation.html"><a href="leaf-water-sat-leaf-water-content-at-saturation.html#bety-3"><i class="fa fa-check"></i><b>5.2</b> BETY</a></li>
<li class="chapter" data-level="5.3" data-path="leaf-water-sat-leaf-water-content-at-saturation.html"><a href="leaf-water-sat-leaf-water-content-at-saturation.html#calculation-3"><i class="fa fa-check"></i><b>5.3</b> Calculation</a><ul>
<li class="chapter" data-level="5.3.1" data-path="leaf-water-sat-leaf-water-content-at-saturation.html"><a href="leaf-water-sat-leaf-water-content-at-saturation.html#expert-elicitation-3"><i class="fa fa-check"></i><b>5.3.1</b> Expert elicitation</a></li>
<li class="chapter" data-level="5.3.2" data-path="leaf-water-sat-leaf-water-content-at-saturation.html"><a href="leaf-water-sat-leaf-water-content-at-saturation.html#conversion-3"><i class="fa fa-check"></i><b>5.3.2</b> Conversion</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="leaf-water-sat-leaf-water-content-at-saturation.html"><a href="leaf-water-sat-leaf-water-content-at-saturation.html#code-3"><i class="fa fa-check"></i><b>5.4</b> Code</a><ul>
<li class="chapter" data-level="5.4.1" data-path="leaf-water-sat-leaf-water-content-at-saturation.html"><a href="leaf-water-sat-leaf-water-content-at-saturation.html#initial-testing-code"><i class="fa fa-check"></i><b>5.4.1</b> Initial testing code</a></li>
<li class="chapter" data-level="5.4.2" data-path="leaf-water-sat-leaf-water-content-at-saturation.html"><a href="leaf-water-sat-leaf-water-content-at-saturation.html#actual-code"><i class="fa fa-check"></i><b>5.4.2</b> Actual code</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="leaf-psi-tlp-leaf-water-potential-at-turgor-loss-point.html"><a href="leaf-psi-tlp-leaf-water-potential-at-turgor-loss-point.html"><i class="fa fa-check"></i><b>6</b> <code>[leaf_psi_tlp]:</code> Leaf water potential at turgor loss point</a><ul>
<li class="chapter" data-level="6.1" data-path="leaf-psi-tlp-leaf-water-potential-at-turgor-loss-point.html"><a href="leaf-psi-tlp-leaf-water-potential-at-turgor-loss-point.html#ed-4"><i class="fa fa-check"></i><b>6.1</b> ED</a></li>
<li class="chapter" data-level="6.2" data-path="leaf-psi-tlp-leaf-water-potential-at-turgor-loss-point.html"><a href="leaf-psi-tlp-leaf-water-potential-at-turgor-loss-point.html#bety-4"><i class="fa fa-check"></i><b>6.2</b> BETY</a></li>
<li class="chapter" data-level="6.3" data-path="leaf-psi-tlp-leaf-water-potential-at-turgor-loss-point.html"><a href="leaf-psi-tlp-leaf-water-potential-at-turgor-loss-point.html#calculation-4"><i class="fa fa-check"></i><b>6.3</b> Calculation</a><ul>
<li class="chapter" data-level="6.3.1" data-path="leaf-psi-tlp-leaf-water-potential-at-turgor-loss-point.html"><a href="leaf-psi-tlp-leaf-water-potential-at-turgor-loss-point.html#expert-elicitation-4"><i class="fa fa-check"></i><b>6.3.1</b> Expert elicitation</a></li>
<li class="chapter" data-level="6.3.2" data-path="leaf-psi-tlp-leaf-water-potential-at-turgor-loss-point.html"><a href="leaf-psi-tlp-leaf-water-potential-at-turgor-loss-point.html#conversion-4"><i class="fa fa-check"></i><b>6.3.2</b> Conversion</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="leaf-psi-tlp-leaf-water-potential-at-turgor-loss-point.html"><a href="leaf-psi-tlp-leaf-water-potential-at-turgor-loss-point.html#code-4"><i class="fa fa-check"></i><b>6.4</b> Code</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="leaf-water-cap-leaf-hydaulic-capacitance-.html"><a href="leaf-water-cap-leaf-hydaulic-capacitance-.html"><i class="fa fa-check"></i><b>7</b> <code>[leaf_water_cap]:</code> Leaf hydaulic capacitance.</a><ul>
<li class="chapter" data-level="7.1" data-path="leaf-water-cap-leaf-hydaulic-capacitance-.html"><a href="leaf-water-cap-leaf-hydaulic-capacitance-.html#ed-5"><i class="fa fa-check"></i><b>7.1</b> ED</a></li>
<li class="chapter" data-level="7.2" data-path="leaf-water-cap-leaf-hydaulic-capacitance-.html"><a href="leaf-water-cap-leaf-hydaulic-capacitance-.html#bety-5"><i class="fa fa-check"></i><b>7.2</b> BETY</a></li>
<li class="chapter" data-level="7.3" data-path="leaf-water-cap-leaf-hydaulic-capacitance-.html"><a href="leaf-water-cap-leaf-hydaulic-capacitance-.html#calculation-5"><i class="fa fa-check"></i><b>7.3</b> Calculation</a><ul>
<li class="chapter" data-level="7.3.1" data-path="leaf-water-cap-leaf-hydaulic-capacitance-.html"><a href="leaf-water-cap-leaf-hydaulic-capacitance-.html#expert-elicitation-5"><i class="fa fa-check"></i><b>7.3.1</b> Expert elicitation</a></li>
<li class="chapter" data-level="7.3.2" data-path="leaf-water-cap-leaf-hydaulic-capacitance-.html"><a href="leaf-water-cap-leaf-hydaulic-capacitance-.html#conversion-5"><i class="fa fa-check"></i><b>7.3.2</b> Conversion</a></li>
</ul></li>
<li class="chapter" data-level="7.4" data-path="leaf-water-cap-leaf-hydaulic-capacitance-.html"><a href="leaf-water-cap-leaf-hydaulic-capacitance-.html#code-5"><i class="fa fa-check"></i><b>7.4</b> Code</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="leaf-psi-min-leaf-minimum-water-potential.html"><a href="leaf-psi-min-leaf-minimum-water-potential.html"><i class="fa fa-check"></i><b>8</b> <code>[leaf_psi_min]:</code> Leaf minimum water potential</a><ul>
<li class="chapter" data-level="8.1" data-path="leaf-psi-min-leaf-minimum-water-potential.html"><a href="leaf-psi-min-leaf-minimum-water-potential.html#ed-6"><i class="fa fa-check"></i><b>8.1</b> ED</a></li>
<li class="chapter" data-level="8.2" data-path="leaf-psi-min-leaf-minimum-water-potential.html"><a href="leaf-psi-min-leaf-minimum-water-potential.html#bety-6"><i class="fa fa-check"></i><b>8.2</b> BETY</a></li>
<li class="chapter" data-level="8.3" data-path="leaf-psi-min-leaf-minimum-water-potential.html"><a href="leaf-psi-min-leaf-minimum-water-potential.html#calculation-6"><i class="fa fa-check"></i><b>8.3</b> Calculation</a><ul>
<li class="chapter" data-level="8.3.1" data-path="leaf-psi-min-leaf-minimum-water-potential.html"><a href="leaf-psi-min-leaf-minimum-water-potential.html#expert-elicitation-6"><i class="fa fa-check"></i><b>8.3.1</b> Expert elicitation</a></li>
<li class="chapter" data-level="8.3.2" data-path="leaf-psi-min-leaf-minimum-water-potential.html"><a href="leaf-psi-min-leaf-minimum-water-potential.html#conversion-6"><i class="fa fa-check"></i><b>8.3.2</b> Conversion</a></li>
</ul></li>
<li class="chapter" data-level="8.4" data-path="leaf-psi-min-leaf-minimum-water-potential.html"><a href="leaf-psi-min-leaf-minimum-water-potential.html#code-6"><i class="fa fa-check"></i><b>8.4</b> Code</a></li>
</ul></li>
<li class="part"><span><b>III Key Wood Traits</b></span></li>
<li class="chapter" data-level="9" data-path="wood-psi-osmotic-sapwood-osmotic-water-potential-at-saturation.html"><a href="wood-psi-osmotic-sapwood-osmotic-water-potential-at-saturation.html"><i class="fa fa-check"></i><b>9</b> <code>[wood_psi_osmotic]:</code> Sapwood osmotic water potential at saturation</a><ul>
<li class="chapter" data-level="9.1" data-path="wood-psi-osmotic-sapwood-osmotic-water-potential-at-saturation.html"><a href="wood-psi-osmotic-sapwood-osmotic-water-potential-at-saturation.html#ed-7"><i class="fa fa-check"></i><b>9.1</b> ED</a></li>
<li class="chapter" data-level="9.2" data-path="wood-psi-osmotic-sapwood-osmotic-water-potential-at-saturation.html"><a href="wood-psi-osmotic-sapwood-osmotic-water-potential-at-saturation.html#bety-7"><i class="fa fa-check"></i><b>9.2</b> BETY</a></li>
<li class="chapter" data-level="9.3" data-path="wood-psi-osmotic-sapwood-osmotic-water-potential-at-saturation.html"><a href="wood-psi-osmotic-sapwood-osmotic-water-potential-at-saturation.html#calculation-7"><i class="fa fa-check"></i><b>9.3</b> Calculation</a><ul>
<li class="chapter" data-level="9.3.1" data-path="wood-psi-osmotic-sapwood-osmotic-water-potential-at-saturation.html"><a href="wood-psi-osmotic-sapwood-osmotic-water-potential-at-saturation.html#expert-elicitation-7"><i class="fa fa-check"></i><b>9.3.1</b> Expert elicitation</a></li>
<li class="chapter" data-level="9.3.2" data-path="wood-psi-osmotic-sapwood-osmotic-water-potential-at-saturation.html"><a href="wood-psi-osmotic-sapwood-osmotic-water-potential-at-saturation.html#conversion-7"><i class="fa fa-check"></i><b>9.3.2</b> Conversion</a></li>
<li class="chapter" data-level="9.3.3" data-path="wood-psi-osmotic-sapwood-osmotic-water-potential-at-saturation.html"><a href="wood-psi-osmotic-sapwood-osmotic-water-potential-at-saturation.html#code-7"><i class="fa fa-check"></i><b>9.3.3</b> Code</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="10" data-path="wood-elastic-mod-sapwood-bulk-elastic-modulus.html"><a href="wood-elastic-mod-sapwood-bulk-elastic-modulus.html"><i class="fa fa-check"></i><b>10</b> <code>[wood_elastic_mod]:</code> Sapwood bulk elastic modulus</a><ul>
<li class="chapter" data-level="10.1" data-path="wood-elastic-mod-sapwood-bulk-elastic-modulus.html"><a href="wood-elastic-mod-sapwood-bulk-elastic-modulus.html#ed-8"><i class="fa fa-check"></i><b>10.1</b> ED</a></li>
<li class="chapter" data-level="10.2" data-path="wood-elastic-mod-sapwood-bulk-elastic-modulus.html"><a href="wood-elastic-mod-sapwood-bulk-elastic-modulus.html#bety-8"><i class="fa fa-check"></i><b>10.2</b> BETY</a></li>
<li class="chapter" data-level="10.3" data-path="wood-elastic-mod-sapwood-bulk-elastic-modulus.html"><a href="wood-elastic-mod-sapwood-bulk-elastic-modulus.html#calculation-8"><i class="fa fa-check"></i><b>10.3</b> Calculation</a><ul>
<li class="chapter" data-level="10.3.1" data-path="wood-elastic-mod-sapwood-bulk-elastic-modulus.html"><a href="wood-elastic-mod-sapwood-bulk-elastic-modulus.html#expert-elicitation-8"><i class="fa fa-check"></i><b>10.3.1</b> Expert elicitation</a></li>
<li class="chapter" data-level="10.3.2" data-path="wood-elastic-mod-sapwood-bulk-elastic-modulus.html"><a href="wood-elastic-mod-sapwood-bulk-elastic-modulus.html#conversion-8"><i class="fa fa-check"></i><b>10.3.2</b> Conversion</a></li>
</ul></li>
<li class="chapter" data-level="10.4" data-path="wood-elastic-mod-sapwood-bulk-elastic-modulus.html"><a href="wood-elastic-mod-sapwood-bulk-elastic-modulus.html#code-8"><i class="fa fa-check"></i><b>10.4</b> Code</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="wood-psi-tlp-sapwood-water-potential-at-turgor-loss-point.html"><a href="wood-psi-tlp-sapwood-water-potential-at-turgor-loss-point.html"><i class="fa fa-check"></i><b>11</b> <code>[wood_psi_tlp]:</code> Sapwood water potential at turgor loss point</a><ul>
<li class="chapter" data-level="11.1" data-path="wood-psi-tlp-sapwood-water-potential-at-turgor-loss-point.html"><a href="wood-psi-tlp-sapwood-water-potential-at-turgor-loss-point.html#ed-9"><i class="fa fa-check"></i><b>11.1</b> ED</a></li>
<li class="chapter" data-level="11.2" data-path="wood-psi-tlp-sapwood-water-potential-at-turgor-loss-point.html"><a href="wood-psi-tlp-sapwood-water-potential-at-turgor-loss-point.html#bety-9"><i class="fa fa-check"></i><b>11.2</b> BETY</a></li>
<li class="chapter" data-level="11.3" data-path="wood-psi-tlp-sapwood-water-potential-at-turgor-loss-point.html"><a href="wood-psi-tlp-sapwood-water-potential-at-turgor-loss-point.html#calculation-9"><i class="fa fa-check"></i><b>11.3</b> Calculation</a><ul>
<li class="chapter" data-level="11.3.1" data-path="wood-psi-tlp-sapwood-water-potential-at-turgor-loss-point.html"><a href="wood-psi-tlp-sapwood-water-potential-at-turgor-loss-point.html#expert-elicitation-9"><i class="fa fa-check"></i><b>11.3.1</b> Expert elicitation</a></li>
<li class="chapter" data-level="11.3.2" data-path="wood-psi-tlp-sapwood-water-potential-at-turgor-loss-point.html"><a href="wood-psi-tlp-sapwood-water-potential-at-turgor-loss-point.html#conversion-9"><i class="fa fa-check"></i><b>11.3.2</b> Conversion</a></li>
</ul></li>
<li class="chapter" data-level="11.4" data-path="wood-psi-tlp-sapwood-water-potential-at-turgor-loss-point.html"><a href="wood-psi-tlp-sapwood-water-potential-at-turgor-loss-point.html#code-9"><i class="fa fa-check"></i><b>11.4</b> Code</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="wood-water-cap-wood-hydaulic-capacitance.html"><a href="wood-water-cap-wood-hydaulic-capacitance.html"><i class="fa fa-check"></i><b>12</b> <code>[wood_water_cap]:</code> Wood hydaulic capacitance</a><ul>
<li class="chapter" data-level="12.1" data-path="wood-water-cap-wood-hydaulic-capacitance.html"><a href="wood-water-cap-wood-hydaulic-capacitance.html#ed-10"><i class="fa fa-check"></i><b>12.1</b> ED</a></li>
<li class="chapter" data-level="12.2" data-path="wood-water-cap-wood-hydaulic-capacitance.html"><a href="wood-water-cap-wood-hydaulic-capacitance.html#bety-10"><i class="fa fa-check"></i><b>12.2</b> BETY</a></li>
<li class="chapter" data-level="12.3" data-path="wood-water-cap-wood-hydaulic-capacitance.html"><a href="wood-water-cap-wood-hydaulic-capacitance.html#calculation-10"><i class="fa fa-check"></i><b>12.3</b> Calculation</a><ul>
<li class="chapter" data-level="12.3.1" data-path="wood-water-cap-wood-hydaulic-capacitance.html"><a href="wood-water-cap-wood-hydaulic-capacitance.html#expert-elicitation-10"><i class="fa fa-check"></i><b>12.3.1</b> Expert elicitation</a></li>
</ul></li>
<li class="chapter" data-level="12.4" data-path="wood-water-cap-wood-hydaulic-capacitance.html"><a href="wood-water-cap-wood-hydaulic-capacitance.html#code-10"><i class="fa fa-check"></i><b>12.4</b> Code</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="wood-psi-min-sapwood-minimum-relative-water-content-or-sapwood-residual-fraction.html"><a href="wood-psi-min-sapwood-minimum-relative-water-content-or-sapwood-residual-fraction.html"><i class="fa fa-check"></i><b>13</b> <code>[wood_psi_min]:</code> Sapwood minimum relative water content or Sapwood residual fraction</a><ul>
<li class="chapter" data-level="13.1" data-path="wood-psi-min-sapwood-minimum-relative-water-content-or-sapwood-residual-fraction.html"><a href="wood-psi-min-sapwood-minimum-relative-water-content-or-sapwood-residual-fraction.html#ed-11"><i class="fa fa-check"></i><b>13.1</b> ED</a></li>
<li class="chapter" data-level="13.2" data-path="wood-psi-min-sapwood-minimum-relative-water-content-or-sapwood-residual-fraction.html"><a href="wood-psi-min-sapwood-minimum-relative-water-content-or-sapwood-residual-fraction.html#bety-11"><i class="fa fa-check"></i><b>13.2</b> BETY</a></li>
<li class="chapter" data-level="13.3" data-path="wood-psi-min-sapwood-minimum-relative-water-content-or-sapwood-residual-fraction.html"><a href="wood-psi-min-sapwood-minimum-relative-water-content-or-sapwood-residual-fraction.html#calculation-11"><i class="fa fa-check"></i><b>13.3</b> Calculation</a><ul>
<li class="chapter" data-level="13.3.1" data-path="wood-psi-min-sapwood-minimum-relative-water-content-or-sapwood-residual-fraction.html"><a href="wood-psi-min-sapwood-minimum-relative-water-content-or-sapwood-residual-fraction.html#expert-elicitation-11"><i class="fa fa-check"></i><b>13.3.1</b> Expert elicitation</a></li>
</ul></li>
<li class="chapter" data-level="13.4" data-path="wood-psi-min-sapwood-minimum-relative-water-content-or-sapwood-residual-fraction.html"><a href="wood-psi-min-sapwood-minimum-relative-water-content-or-sapwood-residual-fraction.html#code-11"><i class="fa fa-check"></i><b>13.4</b> Code</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="wood-kmax-maximum-hydraulic-conductivity-of-the-stem.html"><a href="wood-kmax-maximum-hydraulic-conductivity-of-the-stem.html"><i class="fa fa-check"></i><b>14</b> <code>[wood_Kmax]:</code> Maximum hydraulic conductivity of the stem</a><ul>
<li class="chapter" data-level="14.1" data-path="wood-kmax-maximum-hydraulic-conductivity-of-the-stem.html"><a href="wood-kmax-maximum-hydraulic-conductivity-of-the-stem.html#ed-12"><i class="fa fa-check"></i><b>14.1</b> ED</a></li>
<li class="chapter" data-level="14.2" data-path="wood-kmax-maximum-hydraulic-conductivity-of-the-stem.html"><a href="wood-kmax-maximum-hydraulic-conductivity-of-the-stem.html#bety-12"><i class="fa fa-check"></i><b>14.2</b> BETY</a></li>
<li class="chapter" data-level="14.3" data-path="wood-kmax-maximum-hydraulic-conductivity-of-the-stem.html"><a href="wood-kmax-maximum-hydraulic-conductivity-of-the-stem.html#calculation-12"><i class="fa fa-check"></i><b>14.3</b> Calculation</a><ul>
<li class="chapter" data-level="14.3.1" data-path="wood-kmax-maximum-hydraulic-conductivity-of-the-stem.html"><a href="wood-kmax-maximum-hydraulic-conductivity-of-the-stem.html#expert-elicitation-12"><i class="fa fa-check"></i><b>14.3.1</b> Expert elicitation</a></li>
<li class="chapter" data-level="14.3.2" data-path="wood-kmax-maximum-hydraulic-conductivity-of-the-stem.html"><a href="wood-kmax-maximum-hydraulic-conductivity-of-the-stem.html#conversion-10"><i class="fa fa-check"></i><b>14.3.2</b> Conversion</a></li>
</ul></li>
<li class="chapter" data-level="14.4" data-path="wood-kmax-maximum-hydraulic-conductivity-of-the-stem.html"><a href="wood-kmax-maximum-hydraulic-conductivity-of-the-stem.html#code-12"><i class="fa fa-check"></i><b>14.4</b> Code</a></li>
</ul></li>
<li class="chapter" data-level="15" data-path="wood-psi50-water-potential-at-which-50-of-stem-conductivity-is-lost.html"><a href="wood-psi50-water-potential-at-which-50-of-stem-conductivity-is-lost.html"><i class="fa fa-check"></i><b>15</b> <code>[wood_psi50]:</code> Water potential at which 50% of stem conductivity is lost</a><ul>
<li class="chapter" data-level="15.1" data-path="wood-psi50-water-potential-at-which-50-of-stem-conductivity-is-lost.html"><a href="wood-psi50-water-potential-at-which-50-of-stem-conductivity-is-lost.html#ed-13"><i class="fa fa-check"></i><b>15.1</b> ED</a></li>
<li class="chapter" data-level="15.2" data-path="wood-psi50-water-potential-at-which-50-of-stem-conductivity-is-lost.html"><a href="wood-psi50-water-potential-at-which-50-of-stem-conductivity-is-lost.html#bety-13"><i class="fa fa-check"></i><b>15.2</b> BETY</a></li>
<li class="chapter" data-level="15.3" data-path="wood-psi50-water-potential-at-which-50-of-stem-conductivity-is-lost.html"><a href="wood-psi50-water-potential-at-which-50-of-stem-conductivity-is-lost.html#calculation-13"><i class="fa fa-check"></i><b>15.3</b> Calculation</a><ul>
<li class="chapter" data-level="15.3.1" data-path="wood-psi50-water-potential-at-which-50-of-stem-conductivity-is-lost.html"><a href="wood-psi50-water-potential-at-which-50-of-stem-conductivity-is-lost.html#expert-elicitation-13"><i class="fa fa-check"></i><b>15.3.1</b> Expert elicitation</a></li>
<li class="chapter" data-level="15.3.2" data-path="wood-psi50-water-potential-at-which-50-of-stem-conductivity-is-lost.html"><a href="wood-psi50-water-potential-at-which-50-of-stem-conductivity-is-lost.html#conversion-11"><i class="fa fa-check"></i><b>15.3.2</b> Conversion</a></li>
</ul></li>
<li class="chapter" data-level="15.4" data-path="wood-psi50-water-potential-at-which-50-of-stem-conductivity-is-lost.html"><a href="wood-psi50-water-potential-at-which-50-of-stem-conductivity-is-lost.html#code-13"><i class="fa fa-check"></i><b>15.4</b> Code</a><ul>
<li class="chapter" data-level="15.4.1" data-path="wood-psi50-water-potential-at-which-50-of-stem-conductivity-is-lost.html"><a href="wood-psi50-water-potential-at-which-50-of-stem-conductivity-is-lost.html#using-the-best-fit-norm"><i class="fa fa-check"></i><b>15.4.1</b> Using the best fit norm</a></li>
<li class="chapter" data-level="15.4.2" data-path="wood-psi50-water-potential-at-which-50-of-stem-conductivity-is-lost.html"><a href="wood-psi50-water-potential-at-which-50-of-stem-conductivity-is-lost.html#using-more-realistic-lnorm"><i class="fa fa-check"></i><b>15.4.2</b> Using more realistic lnorm</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="16" data-path="wood-kexp-exponent-for-the-hydraulic-vulnerability-curve-of-stem-conductivity.html"><a href="wood-kexp-exponent-for-the-hydraulic-vulnerability-curve-of-stem-conductivity.html"><i class="fa fa-check"></i><b>16</b> <code>[wood_Kexp]:</code> Exponent for the hydraulic vulnerability curve of stem conductivity</a><ul>
<li class="chapter" data-level="16.1" data-path="wood-kexp-exponent-for-the-hydraulic-vulnerability-curve-of-stem-conductivity.html"><a href="wood-kexp-exponent-for-the-hydraulic-vulnerability-curve-of-stem-conductivity.html#ed-14"><i class="fa fa-check"></i><b>16.1</b> ED</a></li>
<li class="chapter" data-level="16.2" data-path="wood-kexp-exponent-for-the-hydraulic-vulnerability-curve-of-stem-conductivity.html"><a href="wood-kexp-exponent-for-the-hydraulic-vulnerability-curve-of-stem-conductivity.html#bety-14"><i class="fa fa-check"></i><b>16.2</b> BETY</a></li>
<li class="chapter" data-level="16.3" data-path="wood-kexp-exponent-for-the-hydraulic-vulnerability-curve-of-stem-conductivity.html"><a href="wood-kexp-exponent-for-the-hydraulic-vulnerability-curve-of-stem-conductivity.html#calculation-14"><i class="fa fa-check"></i><b>16.3</b> Calculation</a><ul>
<li class="chapter" data-level="16.3.1" data-path="wood-kexp-exponent-for-the-hydraulic-vulnerability-curve-of-stem-conductivity.html"><a href="wood-kexp-exponent-for-the-hydraulic-vulnerability-curve-of-stem-conductivity.html#expert-elicitation-14"><i class="fa fa-check"></i><b>16.3.1</b> Expert elicitation</a></li>
<li class="chapter" data-level="16.3.2" data-path="wood-kexp-exponent-for-the-hydraulic-vulnerability-curve-of-stem-conductivity.html"><a href="wood-kexp-exponent-for-the-hydraulic-vulnerability-curve-of-stem-conductivity.html#conversion-12"><i class="fa fa-check"></i><b>16.3.2</b> Conversion</a></li>
</ul></li>
<li class="chapter" data-level="16.4" data-path="wood-kexp-exponent-for-the-hydraulic-vulnerability-curve-of-stem-conductivity.html"><a href="wood-kexp-exponent-for-the-hydraulic-vulnerability-curve-of-stem-conductivity.html#code-14"><i class="fa fa-check"></i><b>16.4</b> Code</a></li>
</ul></li>
<li class="chapter" data-level="17" data-path="comparing-data-to-priors.html"><a href="comparing-data-to-priors.html"><i class="fa fa-check"></i><b>17</b> Comparing Data to Priors</a><ul>
<li class="chapter" data-level="17.1" data-path="comparing-data-to-priors.html"><a href="comparing-data-to-priors.html#wood-density"><i class="fa fa-check"></i><b>17.1</b> Wood Density</a></li>
<li class="chapter" data-level="17.2" data-path="comparing-data-to-priors.html"><a href="comparing-data-to-priors.html#sla"><i class="fa fa-check"></i><b>17.2</b> SLA</a></li>
<li class="chapter" data-level="17.3" data-path="comparing-data-to-priors.html"><a href="comparing-data-to-priors.html#kmax"><i class="fa fa-check"></i><b>17.3</b> Kmax</a></li>
<li class="chapter" data-level="17.4" data-path="comparing-data-to-priors.html"><a href="comparing-data-to-priors.html#psi50"><i class="fa fa-check"></i><b>17.4</b> Psi50</a></li>
<li class="chapter" data-level="17.5" data-path="comparing-data-to-priors.html"><a href="comparing-data-to-priors.html#kexp"><i class="fa fa-check"></i><b>17.5</b> Kexp</a></li>
</ul></li>
<li class="chapter" data-level="18" data-path="taxonomic-name-resolution-when-importing-data-in-to-bety.html"><a href="taxonomic-name-resolution-when-importing-data-in-to-bety.html"><i class="fa fa-check"></i><b>18</b> Taxonomic Name Resolution when Importing Data in to BETY</a><ul>
<li class="chapter" data-level="" data-path="taxonomic-name-resolution-when-importing-data-in-to-bety.html"><a href="taxonomic-name-resolution-when-importing-data-in-to-bety.html#name-resolution"><i class="fa fa-check"></i>Name Resolution</a></li>
<li class="chapter" data-level="" data-path="taxonomic-name-resolution-when-importing-data-in-to-bety.html"><a href="taxonomic-name-resolution-when-importing-data-in-to-bety.html#building-a-tropical-pft"><i class="fa fa-check"></i>Building a Tropical PFT</a></li>
<li class="chapter" data-level="18.1" data-path="taxonomic-name-resolution-when-importing-data-in-to-bety.html"><a href="taxonomic-name-resolution-when-importing-data-in-to-bety.html#what-i-need-help-with"><i class="fa fa-check"></i><b>18.1</b> What I need help with</a></li>
</ul></li>
<li class="chapter" data-level="19" data-path="head.html"><a href="head.html"><i class="fa fa-check"></i><b>19</b> &lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD</a><ul>
<li class="chapter" data-level="19.0.1" data-path="head.html"><a href="head.html#both-the-submitted-and-accepted-names-in-bety-and-they-are-the-same"><i class="fa fa-check"></i><b>19.0.1</b> Both the submitted and accepted names in BETY and they are the same</a></li>
<li class="chapter" data-level="" data-path="head.html"><a href="head.html#cases"><i class="fa fa-check"></i>Cases</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="case-7.html"><a href="case-7.html"><i class="fa fa-check"></i>#### Case 7</a><ul>
<li class="chapter" data-level="19.0.2" data-path="case-7.html"><a href="case-7.html#only-the-accepted-name-is-in-in-bety"><i class="fa fa-check"></i><b>19.0.2</b> Only the accepted name is in in BETY</a></li>
<li class="chapter" data-level="" data-path="case-7.html"><a href="case-7.html#none-of-the-names-are-in-bety"><i class="fa fa-check"></i>None of the names are in BETY</a></li>
<li class="chapter" data-level="" data-path="case-7.html"><a href="case-7.html#tnrs-didnt-work"><i class="fa fa-check"></i>TNRS didn’t work</a></li>
<li class="chapter" data-level="19.0.3" data-path="case-7.html"><a href="case-7.html#none-of-the-names-are-in-bety-1"><i class="fa fa-check"></i><b>19.0.3</b> None of the names are in BETY</a></li>
<li class="chapter" data-level="19.0.4" data-path="case-7.html"><a href="case-7.html#tnrs-didnt-work-1"><i class="fa fa-check"></i><b>19.0.4</b> TNRS didn’t work</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Calculating ED Hydro Parameter Priors</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="taxonomic-name-resolution-when-importing-data-in-to-bety" class="section level1">
<h1><span class="header-section-number">18</span> Taxonomic Name Resolution when Importing Data in to BETY</h1>
<div id="name-resolution" class="section level2 unnumbered">
<h2>Name Resolution</h2>
<p>When users have plant trait data that they want to enter in to the database, the data needs to attributed to a specific species database record. When the user has no other information (such as ID codes like the USDA and FIA codes) the only way to match the species in the data with species entry in the database is through matching of scientific names.</p>
<p>But it may be the case that the accepted scientific name has changed since the data was collected (and/or published), or that the data itself contains errors (typos or otherwise) such that the names in the data are not matching with anything that has already been entered in to BETY. It is also the case that BETY does not have a complete record.</p>
<p>At this point we need to employ additional tools to help us in resolving taxonomic names.
Already in the PEcAn code there exists</p>
<ul>
<li><a href="https://github.com/PecanProject/pecan/blob/develop/modules/data.land/R/match_species_id.R"><code>match_species_id</code></a>: But this cannot account for fuzzy matching of names (ie spelling errors) and synonyms.</li>
<li><a href="https://github.com/PecanProject/pecan/blob/297087787cfec6129428e1e334297ed2b6030a06/base/db/inst/import-try/94.match.species.R"><code>94.match.species</code></a>: This code is specific to importing data from thr TRY database and experiments with some partial matching through grep statements, but again does not account for synonyms.</li>
</ul>
<p>Outside of PEcAn, there is the <a href="http://tnrs.iplantcollaborative.org/TNRSapp.html">Taxonomic Name Resolution Service</a></p>
<p>Additionally, there is an R package <a href="https://ropensci.github.io/taxize-book/">taxize</a> which, among other things, provides an R interface between TNRS and R.</p>
<p>I recommend checking out their <a href="https://cran.r-project.org/web/packages/taxize/vignettes/">vignettes</a> - you can also just access them on their <a href="https://github.com/ropensci/taxize">github</a>.</p>
</div>
<div id="building-a-tropical-pft" class="section level2 unnumbered">
<h2>Building a Tropical PFT</h2>
<p>My goal is not only to import trait data, but to build a PFT that I can used to do runs in the tropics. <strong>(How general should this PFT be? That’s a good question!)</strong></p>
<p>Right now I’m using a clone of the tropical PFT that was made to be used with FATES. Thus it contains all the imported BETY entries from the ForestGEO Neotropical tree database (<a href="http://ctfs.si.edu/webatlas/neotropicaltree/" class="uri">http://ctfs.si.edu/webatlas/neotropicaltree/</a>) and more. There are currently 22286 species linked to the PFT, 20811 of which are the ForestGEO entries.</p>
<p>If I’m importing data with species that are not in the existing PFT, I need to decide if they should be added. And I suppose I should also make sure there aren’t any species in the PFT that shouldn’t be there. This is something that I have no expertise in so I would like advice.
Below I’m loading in all the spcies names from my PFT (id = 1000000131)</p>
<pre class="sourceCode r"><code class="sourceCode r">pftid &lt;-<span class="st"> </span><span class="dv">1000000131</span>
PFT_species &lt;-<span class="st"> </span><span class="kw">tbl</span>(bety, <span class="st">&quot;pfts&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span>dplyr<span class="op">::</span><span class="kw">rename</span>(<span class="dt">pft_id =</span> id) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(pft_id <span class="op">==</span><span class="st"> </span>pftid) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">inner_join</span>(., <span class="kw">tbl</span>(bety, <span class="st">&quot;pfts_species&quot;</span>), <span class="dt">by =</span> <span class="st">&quot;pft_id&quot;</span>) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">inner_join</span>(., <span class="kw">tbl</span>(bety, <span class="st">&quot;species&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span>dplyr<span class="op">::</span><span class="kw">rename</span>(<span class="dt">specie_id =</span> id), <span class="dt">by =</span> <span class="st">&quot;specie_id&quot;</span>) <span class="op">%&gt;%</span>
<span class="st">  </span>dplyr<span class="op">::</span><span class="kw">select</span>(<span class="kw">one_of</span>(<span class="st">&quot;pft_id&quot;</span>, <span class="st">&quot;name&quot;</span>, <span class="st">&quot;specie_id&quot;</span>, <span class="st">&quot;genus&quot;</span>, <span class="st">&quot;species&quot;</span>, <span class="st">&quot;scientificname&quot;</span>, <span class="st">&quot;notes&quot;</span>)) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">collect</span>()

<span class="co"># Check that all the ForestGEO species are in the PFT (they are)</span>
nForestGEO &lt;-<span class="st"> </span><span class="kw">tbl</span>(bety, <span class="st">&quot;species&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(<span class="kw">str_detect</span>(notes, <span class="st">&quot;ForestGEO&quot;</span>)) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">collect</span>() <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">nrow</span>()
PFT_species <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(<span class="kw">str_detect</span>(PFT_species<span class="op">$</span>notes, <span class="st">&quot;ForestGEO&quot;</span>)) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">nrow</span>() <span class="op">==</span><span class="st"> </span>nForestGEO</code></pre>
<pre><code>## [1] TRUE</code></pre>
<pre class="sourceCode r"><code class="sourceCode r">PFT_species<span class="op">$</span>notes &lt;-<span class="st"> </span><span class="ot">NULL</span></code></pre>
</div>
<div id="what-i-need-help-with" class="section level2">
<h2><span class="header-section-number">18.1</span> What I need help with</h2>
<p>I need to import trait data in to the database and I need to match the species names in the data to the records in BETY. Furthermore, I need to decide if I need to add records or change existing records in BETY.</p>
<p>I’ll refer to the species name in the data set as “submitted name” -
I run these names through the TNRS to see if returns spelling corrections or
a different “accepted name.”</p>
<p>For example:</p>
<p>If my submitted name is <code>&quot;Simaroubu glauca&quot;</code> (which I misspelled from Simarouba glauca)</p>
<pre class="sourceCode r"><code class="sourceCode r">submit_name &lt;-<span class="st"> &quot;Simaroubu glauca&quot;</span>
<span class="kw">tnrs</span>(<span class="dt">query =</span> submit_name)</code></pre>
<pre><code>## Calling http://taxosaurus.org/retrieve/4976dd6048ff2aa6ec7c29db864a93f1</code></pre>
<pre><code>##      submittedname    acceptedname    sourceid score      matchedname
## 1 Simaroubu glauca Simarouba amara iPlant_TNRS  0.98 Simarouba glauca
##   authority                                   uri
## 1     Aubl. http://www.tropicos.org/Name/29400090</code></pre>
<p>The iPlant TNRS matches the name Simarouba glauca but then provides an <strong>accepted</strong> name of Simarouba amara.</p>
<p>When I use the name resolving tools, and try to match the submitted and accepted names to BETY I come up with 13 different cases that can potentially arrise. I’ll go through each one in detail below:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co">#------------------------------------------------------------------------------#</span>
<span class="co"># Both the submitted and accepted names in BETY</span>

<span class="co"># Check if they equal each other</span>
submit_accept &lt;-<span class="st"> </span>sp<span class="op">$</span>submit_bety_id[i] <span class="op">==</span><span class="st"> </span>sp<span class="op">$</span>accept_bety_id[i] 

<span class="co"># They equal each other</span>
case01 &lt;-<span class="st"> </span>submit_bety <span class="op">&amp;</span><span class="st"> </span>accept_bety <span class="op">&amp;</span><span class="st"> </span>submit_accept <span class="op">&amp;</span><span class="st"> </span>accept_PFT <span class="co"># Best case, don&#39;t need to do anything.</span>
case02 &lt;-<span class="st"> </span>submit_bety <span class="op">&amp;</span><span class="st"> </span>accept_bety <span class="op">&amp;</span><span class="st"> </span>submit_accept <span class="op">&amp;</span><span class="st"> </span><span class="op">!</span>accept_PFT

<span class="co"># They don&#39;t equal one another</span>
case03 &lt;-<span class="st"> </span>submit_bety <span class="op">&amp;</span><span class="st"> </span>accept_bety <span class="op">&amp;</span><span class="st"> </span><span class="op">!</span>submit_accept <span class="op">&amp;</span><span class="st"> </span>submit_PFT <span class="op">&amp;</span><span class="st"> </span>accept_PFT
case04 &lt;-<span class="st"> </span>submit_bety <span class="op">&amp;</span><span class="st"> </span>accept_bety <span class="op">&amp;</span><span class="st"> </span><span class="op">!</span>submit_accept <span class="op">&amp;</span><span class="st"> </span>submit_PFT <span class="op">&amp;</span><span class="st"> </span><span class="op">!</span>accept_PFT
case05 &lt;-<span class="st"> </span>submit_bety <span class="op">&amp;</span><span class="st"> </span>accept_bety <span class="op">&amp;</span><span class="st"> </span><span class="op">!</span>submit_accept <span class="op">&amp;</span><span class="st"> </span><span class="op">!</span>submit_PFT <span class="op">&amp;</span><span class="st"> </span>accept_PFT
case06 &lt;-<span class="st"> </span>submit_bety <span class="op">&amp;</span><span class="st"> </span>accept_bety <span class="op">&amp;</span><span class="st"> </span><span class="op">!</span>submit_accept <span class="op">&amp;</span><span class="st"> </span><span class="op">!</span>submit_PFT <span class="op">&amp;</span><span class="st"> </span><span class="op">!</span>accept_PFT

<span class="co">#------------------------------------------------------------------------------#</span>
<span class="co"># Only one name in BETY</span>

<span class="co"># Submitted name not in bety, accepted name in BETY</span>
case07 &lt;-<span class="st"> </span><span class="op">!</span>submit_bety <span class="op">&amp;</span><span class="st"> </span>accept_bety <span class="op">&amp;</span><span class="st"> </span>accept_PFT
case08 &lt;-<span class="st"> </span><span class="op">!</span>submit_bety <span class="op">&amp;</span><span class="st"> </span>accept_bety <span class="op">&amp;</span><span class="st"> </span><span class="op">!</span>accept_PFT

<span class="co"># Submitted name in bety, accepted name not in BETY</span>
case09 &lt;-<span class="st"> </span>submit_bety <span class="op">&amp;</span><span class="st"> </span>submit_PFT <span class="op">&amp;</span><span class="st"> </span><span class="op">!</span>accept_bety
case10 &lt;-<span class="st"> </span>submit_bety <span class="op">&amp;</span><span class="st"> </span><span class="op">!</span>submit_PFT <span class="op">&amp;</span><span class="st"> </span><span class="op">!</span>accept_bety

<span class="co">#------------------------------------------------------------------------------#</span>
<span class="co"># None of the names are in BETY</span>
case11 &lt;-<span class="st"> </span><span class="op">!</span>submit_bety <span class="op">&amp;</span><span class="st"> </span><span class="op">!</span>accept_bety <span class="op">&amp;</span><span class="st"> </span><span class="kw">toupper</span>(sp<span class="op">$</span>submit_name[i]) <span class="op">==</span><span class="st"> </span><span class="kw">toupper</span>(sp<span class="op">$</span>accept_name[i])
case12 &lt;-<span class="st"> </span><span class="op">!</span>submit_bety <span class="op">&amp;</span><span class="st"> </span><span class="op">!</span>accept_bety <span class="op">&amp;</span><span class="st"> </span><span class="kw">toupper</span>(sp<span class="op">$</span>submit_name[i]) <span class="op">!=</span><span class="st"> </span><span class="kw">toupper</span>(sp<span class="op">$</span>accept_name[i])

<span class="co">#------------------------------------------------------------------------------#</span>
<span class="co"># Special unlucky number 13 case that the TNRS could not find an accepted name.</span>
<span class="co"># Or TNRS returned a blank which is super lame and confusing.</span>
<span class="co"># These will need to be resolved by hand.</span>
case13 &lt;-<span class="st"> </span><span class="op">!</span>accept_name_exists
<span class="cf">if</span>(case13){
  case01 =<span class="st"> </span>case02 =<span class="st"> </span>case03 =<span class="st"> </span>case04 =<span class="st"> </span>case05 =<span class="st"> </span>case06 =<span class="st"> </span>case07 =<span class="st"> </span>case08 =
<span class="st">    </span>case09 =<span class="st"> </span>case10 =<span class="st"> </span>case11 =<span class="st"> </span>case12 =<span class="st"> </span><span class="ot">FALSE</span>
}</code></pre>
<p>Using a list of 131 species from trait data that I need to import in to BETY (from various sources), I determined the case for each name in a separate script. The result of this analysis are in the file <code>/fs/data3/ecowdery/ED.Hydro/parameters/constraint_calculations/constraint_data/species_out.csv</code>.</p>
<pre class="sourceCode r"><code class="sourceCode r">species_out =<span class="st"> </span><span class="kw">read.csv</span>(<span class="dt">file =</span> <span class="st">&quot;/fs/data3/ecowdery/ED.Hydro/parameters/constraint_calculations/constraint_data/species_out.csv&quot;</span>,
                       <span class="dt">stringsAsFactors =</span> <span class="ot">FALSE</span>) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">select</span>(<span class="op">-</span><span class="kw">one_of</span>(<span class="kw">c</span>(<span class="st">&quot;X&quot;</span>, <span class="st">&quot;X.1&quot;</span>)))

species_out &lt;-<span class="st"> </span>species_out <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">category =</span> <span class="kw">case_when</span>(case <span class="op">&lt;=</span><span class="st"> </span><span class="dv">6</span> <span class="op">~</span><span class="st"> &quot;both&quot;</span>, 
                              <span class="dv">6</span> <span class="op">&lt;</span><span class="st"> </span>case <span class="op">&amp;</span><span class="st"> </span>case <span class="op">&lt;=</span><span class="st"> </span><span class="dv">10</span> <span class="op">~</span><span class="st"> &quot;one&quot;</span>, 
                              <span class="dv">10</span> <span class="op">&lt;</span><span class="st"> </span>case <span class="op">&amp;</span><span class="st"> </span>case <span class="op">&lt;=</span><span class="st"> </span><span class="dv">12</span> <span class="op">~</span><span class="st"> &quot;none&quot;</span>,
                              case <span class="op">==</span><span class="st"> </span><span class="dv">13</span> <span class="op">~</span><span class="st"> &quot;by hand&quot;</span>))
species_out<span class="op">$</span>category &lt;-<span class="st"> </span><span class="kw">factor</span>(species_out<span class="op">$</span>category, <span class="dt">levels =</span> <span class="kw">c</span>(<span class="st">&quot;both&quot;</span>, <span class="st">&quot;one&quot;</span>, <span class="st">&quot;none&quot;</span>, <span class="st">&quot;by hand&quot;</span>))

<span class="co"># Here I color the entries by &quot;score&quot; which is just how &quot;close&quot; the match is</span>
<span class="co"># So the score would go down for a spelling error for example</span>
<span class="kw">ggplot</span>(<span class="dt">data =</span> species_out) <span class="op">+</span><span class="st"> </span>
<span class="st">  </span><span class="kw">geom_bar</span>(<span class="kw">aes</span>(<span class="dt">x =</span> <span class="kw">as.factor</span>(case), <span class="dt">fill =</span> <span class="kw">as.factor</span>(score))) <span class="op">+</span><span class="st"> </span>
<span class="st">  </span><span class="kw">facet_grid</span>(<span class="kw">aes</span>(<span class="dt">cols =</span> category), <span class="dt">scales =</span> <span class="st">&quot;free&quot;</span>, <span class="dt">space =</span> <span class="st">&quot;free&quot;</span>)</code></pre>
<p><img src="Final_Book_files/figure-html/unnamed-chunk-15-1.png" width="672" /></p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Special case for which the TNRS did not work, I&#39;ll get to this later</span>
species_special &lt;-<span class="st"> </span>species_out <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(case <span class="op">==</span><span class="st"> </span><span class="dv">13</span>)

<span class="co"># Entries for which the TNRS did work</span>
species_case &lt;-<span class="st"> </span>species_out <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(case <span class="op">!=</span><span class="st"> </span><span class="dv">13</span>)
<span class="co"># dim(species_case)</span>

<span class="kw">ggplot</span>(<span class="dt">data =</span> species_case <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(case <span class="op">!=</span><span class="st"> </span><span class="dv">1</span>)) <span class="op">+</span><span class="st"> </span>
<span class="st">  </span><span class="kw">geom_bar</span>(<span class="kw">aes</span>(<span class="dt">x =</span> <span class="kw">as.factor</span>(case), <span class="dt">fill =</span> <span class="kw">as.factor</span>(score))) <span class="op">+</span><span class="st"> </span>
<span class="st">  </span><span class="kw">ggtitle</span>(<span class="st">&quot;Cases I need help with&quot;</span>) <span class="op">+</span><span class="st"> </span>
<span class="st">  </span><span class="kw">facet_grid</span>(<span class="kw">aes</span>(<span class="dt">cols =</span> category), <span class="dt">scales =</span> <span class="st">&quot;free&quot;</span>, <span class="dt">space =</span> <span class="st">&quot;free&quot;</span>)</code></pre>
<p><img src="Final_Book_files/figure-html/unnamed-chunk-15-2.png" width="672" /></p>
<p>Luckily, case 1, the one in which the submitted name and accepted name agree and are in BETY and in the tropical PFT is the predominant case. However, there are a lot of other cases that need sorting through. This is where I need help!
&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD
=======</p>
<p><strong>Specific places I would love opinions: case 3-6 &amp; 9-10</strong></p>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<p>587bb33986f478aaf8a807d85da197600f645a08</p>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
<p><strong>Specific places I would love opinions: case 3-6 &amp; 9-10</strong></p>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="comparing-data-to-priors.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="head.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:" && /^https?:/.test(src))
      src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
